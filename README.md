# Planner

Система планирования, исполнения и контроля задач с явной моделью состояний (FSM),
аудитом и возможностью подключения AI-агентов как помощников ролей.

Проект ориентирован на **детерминизм, прозрачность и расширяемость**, а не на «магическую» автоматизацию.

---

## Цели проекта

- Чёткое разделение:
  - **ядро системы** (данные, состояния, правила)
  - **интеллектуальные помощники** (AI-агенты)
- Управление задачами через явные состояния (FSM), а не неявную логику
- Возможность пошаговой эволюции:
  - от ручного управления
  - к агентам-советникам
  - к частично автономным агентам

---

## Архитектурные принципы

- **Postgres — source of truth**
- **FSM в коде**, а не в промптах
- **AI-агенты не исполняют напрямую**, а предлагают действия
- Все изменения состояния:
  - валидируются
  - логируются
  - воспроизводимы
- Минимум «магии», максимум объяснимости

---

## Технологический стек (MVP)

- Python 3.11+
- FastAPI
- SQLAlchemy 2.x
- Alembic (миграции)
- PostgreSQL (Docker)
- Ruff (линтинг/форматирование)
- Pytest
- Docker Compose

---

## Структура проекта

```text
planner/
  app/
    api/            # HTTP API
    core/           # конфигурация, БД, общие утилиты
    models/         # SQLAlchemy модели
  alembic/          # миграции БД
  docker-compose.yml
  pyproject.toml
  README.md
```

## Быстрый старт (локально)
1. Запуск PostgreSQL
```
docker compose up -d
```
2. Виртуальное окружение и зависимости
```
python -m venv .venv
source .venv/bin/activate
pip install -U pip
pip install -e ".[dev]"
```

3. Конфигурация
```
cp .env.example .env
```
4. Миграции
```
alembic upgrade head
```

5. Запуск API
```
uvicorn app.main:app --reload
```

Проверка:
```
GET http://127.0.0.1:8000/health
```
## AI-агенты (план развития)

AI в этом проекте рассматривается как инструмент поддержки ролей, а не как
центральный управляющий механизм.

## Планируемые агенты:
- Supervisor Copilot — помощник постановки задач

- Executor Copilot — подсказки исполнителю

- Reviewer / QA Copilot — контроль качества

- Planner Copilot — анализ загрузки и зависимостей

Все агенты:

- работают через API

- возвращают структурированные предложения

- не меняют состояние без подтверждения

## Статус

Проект находится в активной разработке.

Архитектура и базовые контуры системы формируются итеративно.